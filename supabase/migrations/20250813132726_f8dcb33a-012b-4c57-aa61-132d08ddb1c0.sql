-- Clear existing test questions
DELETE FROM public.questions;

-- Update the question_type column to accept fill-in-the-blank questions
-- First check if the column allows the new type, if not we'll need to update it
ALTER TABLE public.questions 
ALTER COLUMN question_type TYPE TEXT;

-- Create AEPP categories
INSERT INTO public.categories (name, description) VALUES
('Προβλήματα και Δεδομένα', 'Βασικές έννοιες προβλημάτων, δεδομένων και πληροφοριών'),
('Αλγόριθμοι', 'Ορισμός, χαρακτηριστικά και αναπαράσταση αλγορίθμων'),
('Δομές Δεδομένων', 'Βασικές λειτουργίες και μέθοδοι δομών δεδομένων'),
('Ταξινόμηση και Αναζήτηση', 'Μέθοδοι ταξινόμησης και αναζήτησης'),
('Γλώσσες Προγραμματισμού', 'Στοιχεία και χαρακτηριστικά γλωσσών προγραμματισμού');

-- Get category IDs for inserting questions
WITH category_data AS (
  SELECT id, name FROM public.categories WHERE name IN (
    'Προβλήματα και Δεδομένα', 
    'Αλγόριθμοι', 
    'Δομές Δεδομένων', 
    'Ταξινόμηση και Αναζήτηση'
  )
)
INSERT INTO public.questions (
  category_id, 
  question_text, 
  question_type, 
  correct_answer, 
  difficulty_level, 
  points_value,
  explanation
) 
SELECT 
  cd.id,
  question_data.question_text,
  'fill-in-the-blank',
  question_data.correct_answer,
  question_data.difficulty_level,
  question_data.points_value,
  question_data.explanation
FROM category_data cd
CROSS JOIN (
  VALUES 
    (
      'Με τον όρο Πρόβλημα εννοείται μια ________ η οποία ________ ________, απαιτεί ________, η δε ________ της δεν είναι ________, ούτε ________.',
      'κατάσταση|χρήζει|αντιμετώπισης|λύση|λύση|γνωστή|προφανής',
      1,
      10,
      'Με τον όρο Πρόβλημα εννοείται μια κατάσταση η οποία χρήζει αντιμετώπισης, απαιτεί λύση, η δε λύση της δεν είναι γνωστή, ούτε προφανής. (ΑΕΠΠ σ.15)'
    ),
    (
      'Με τον όρο δεδομένο δηλώνεται οποιοδήποτε ________ μπορεί να γίνει ________ από έναν ________ ________ με μία από τις ________ ________ του.',
      'στοιχείο|αντιληπτό|τουλάχιστον|παρατηρητή|πέντε|αισθήσεις',
      1,
      10,
      'Με τον όρο δεδομένο δηλώνεται οποιοδήποτε στοιχείο μπορεί να γίνει αντιληπτό από έναν τουλάχιστον παρατηρητή με μία από τις πέντε αισθήσεις του. (ΑΕΠΠ σ. 19)'
    ),
    (
      'Με τον όρο πληροφορία αναφέρεται οποιοδήποτε ________ ________ προέρχεται από ________ ________.',
      'γνωσιακό|στοιχείο|επεξεργασία|δεδομένων',
      1,
      10,
      'Με τον όρο πληροφορία αναφέρεται οποιοδήποτε γνωσιακό στοιχείο προέρχεται από επεξεργασία δεδομένων. (ΑΕΠΠ σ. 19)'
    ),
    (
      'Ο όρος επεξεργασία δεδομένων δηλώνει εκείνη τη ________ κατά την οποία ένας ________ δέχεται ________, τα επεξεργάζεται σύμφωνα με έναν ________ ________ και αποδίδει ________.',
      'διαδικασία|μηχανισμός|δεδομένα|προκαθορισμένο|τρόπο|πληροφορίες',
      2,
      15,
      'Ο όρος επεξεργασία δεδομένων δηλώνει εκείνη τη διαδικασία κατά την οποία ένας "μηχανισμός" δέχεται δεδομένα, τα επεξεργάζεται σύμφωνα με έναν προκαθορισμένο τρόπο και αποδίδει πληροφορίες. (ΑΕΠΠ σ. 19)'
    )
) AS question_data(question_text, correct_answer, difficulty_level, points_value, explanation)
WHERE cd.name = 'Προβλήματα και Δεδομένα'

UNION ALL

SELECT 
  cd.id,
  question_data.question_text,
  'fill-in-the-blank',
  question_data.correct_answer,
  question_data.difficulty_level,
  question_data.points_value,
  question_data.explanation
FROM category_data cd
CROSS JOIN (
  VALUES 
    (
      'Αλγόριθμος είναι μια ________ ________ ________, ________ ________ και ________ σε ________ χρόνο, που στοχεύουν στην ________ ενός ________.',
      'πεπερασμένη|σειρά|ενεργειών|αυστηρά|καθορισμένων|εκτελέσιμων|πεπερασμένο|επίλυση|προβλήματος',
      2,
      15,
      'Αλγόριθμος είναι μια πεπερασμένη σειρά ενεργειών, αυστηρά καθορισμένων και εκτελέσιμων σε πεπερασμένο χρόνο, που στοχεύουν στην επίλυση ενός προβλήματος.(ΑΕΠΠ σ 33 .)'
    ),
    (
      'Τα στάδια αντιμετώπισης ενός προβλήματος είναι τρία: 1. ________ όπου απαιτείται η σωστή και πλήρης αποσαφήνιση των δεδομένων και των ζητούμενων του προβλήματος 2. ________ όπου το αρχικό πρόβλημα διασπάται σε άλλα επιμέρους απλούστερα προβλήματα 3. ________ όπου υλοποιείται η λύση του προβλήματος, μέσω της λύσης των επιμέρους προβλημάτων.',
      'Κατανόηση|Ανάλυση|Επίλυση',
      2,
      15,
      'Τα στάδια αντιμετώπισης ενός προβλήματος είναι τρία: 1. Κατανόηση, όπου απαιτείται η σωστή και πλήρης αποσαφήνιση των δεδομένων και των ζητούμενων του προβλήματος 2. Ανάλυση, όπου το αρχικό πρόβλημα διασπάται σε άλλα επιμέρους απλούστερα προβλήματα 3. Επίλυση, όπου υλοποιείται η λύση του προβλήματος, μέσω της λύσης των επιμέρους προβλημάτων.(ΑΕΠΠ σ. 25)'
    )
) AS question_data(question_text, correct_answer, difficulty_level, points_value, explanation)
WHERE cd.name = 'Αλγόριθμοι'

UNION ALL

SELECT 
  cd.id,
  question_data.question_text,
  'fill-in-the-blank',
  question_data.correct_answer,
  question_data.difficulty_level,
  question_data.points_value,
  question_data.explanation
FROM category_data cd
CROSS JOIN (
  VALUES 
    (
      'Δομή Δεδομένων είναι ένα ________ ________ ________ που υφίστανται ________ από ένα ________ ________.',
      'σύνολο|αποθηκευμένων|δεδομένων|επεξεργασία|σύνολο|λειτουργιών',
      2,
      15,
      'Δομή Δεδομένων είναι ένα σύνολο αποθηκευμένων δεδομένων που υφίστανται επεξεργασία από ένα σύνολο λειτουργιών.(ΑΕΠΠ σ. 56)'
    ),
    (
      'Βασικές Λειτουργίες Δομών Δεδομένων: ________ είναι η πρόσβαση σε έναν κόμβο με σκοπό να εξετασθεί ή να τροποποιηθεί το περιεχόμενο του. ________ είναι η προσθήκη νέων κόμβων σε μία υπάρχουσα δομή. ________ αποτελεί το αντίστροφο της εισαγωγής. ________ είναι λειτουργία κατά την οποία προσπελαύνονται οι κόμβοι μιας δομής.',
      'ΠΡΟΣΠΕΛΑΣΗ|ΕΙΣΑΓΩΓΗ|ΔΙΑΓΡΑΦΗ|ΑΝΑΖΗΤΗΣΗ',
      3,
      20,
      'Βασικές Λειτουργίες: ΠΡΟΣΠΕΛΑΣΗ, ΕΙΣΑΓΩΓΗ, ΔΙΑΓΡΑΦΗ, ΑΝΑΖΗΤΗΣΗ, ΤΑΞΙΝΟΜΗΣΗ, ΑΝΤΙΓΡΑΦΗ, ΣΥΓΧΩΝΕΥΣΗ, ΔΙΑΧΩΡΙΣΜΟΣ'
    )
) AS question_data(question_text, correct_answer, difficulty_level, points_value, explanation)
WHERE cd.name = 'Δομές Δεδομένων'

UNION ALL

SELECT 
  cd.id,
  question_data.question_text,
  'fill-in-the-blank',
  question_data.correct_answer,
  question_data.difficulty_level,
  question_data.points_value,
  question_data.explanation
FROM category_data cd
CROSS JOIN (
  VALUES 
    (
      'Η σειριακή μέθοδος αναζήτησης δικαιολογείται η χρήση της μόνο σε περιπτώσεις όπου: 1. Ο πίνακας είναι ________ ________ 2. Ο πίνακας είναι ________ ________ 3. Η αναζήτηση ________ ________',
      'μη|ταξινομημένος|μικρού|μεγέθους|σπάνια|γίνεται',
      2,
      15,
      'Η σειριακή μέθοδος αναζήτησης δικαιολογείται όταν: 1. Ο πίνακας είναι μη ταξινομημένος 2. Ο πίνακας είναι μικρού μεγέθους 3. Η αναζήτηση γίνεται σπάνια'
    ),
    (
      'Δοθέντων των στοιχείων a1, a2, ..., an η ταξινόμηση συνίσταται στη ________ της ________ των ________, ώστε να τοποθετηθούν σε μία σειρά έτσι ώστε να ισχύει f(ak1) ≤ f(ak2) ≤ ... ≤ f(akn).',
      'μετάθεση|θέσης|στοιχείων',
      3,
      20,
      'Η ταξινόμηση συνίσταται στη μετάθεση της θέσης των στοιχείων, ώστε να τοποθετηθούν σε μία σειρά με συγκεκριμένη διάταξη'
    )
) AS question_data(question_text, correct_answer, difficulty_level, points_value, explanation)
WHERE cd.name = 'Ταξινόμηση και Αναζήτηση';